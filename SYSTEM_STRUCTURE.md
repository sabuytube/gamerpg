# üéÆ GameRPG - ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç
1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
2. [‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ](#‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)
3. [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå)
4. [‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å](#‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å)
5. [‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•](#‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
6. [API Endpoints](#api-endpoints)
7. [‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°](#‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°)
8. [Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô](#flow-‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)

---

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

**GameRPG Playground** ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Å‡∏° RPG ‡πÅ‡∏ö‡∏ö Turn-based ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Next.js 14 (App Router) ‡∏ú‡∏™‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Authentication ‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏° RPG ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£

### ‚ú® ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö Authentication (Email, Google, Facebook, LINE)
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ (3 ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û: ‡∏ô‡∏±‡∏Å‡∏î‡∏≤‡∏ö, ‡∏ô‡∏±‡∏Å‡∏ò‡∏ô‡∏π, ‡∏ô‡∏±‡∏Å‡πÄ‡∏ß‡∏ó‡∏¢‡πå)
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡πÅ‡∏ö‡∏ö Turn-based
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö Dungeon ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡πÑ‡∏≠‡πÄ‡∏ó‡∏° (Weapon, Armor, Charm)
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö Level ‡πÅ‡∏•‡∏∞ EXP
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö Stats ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢ Stat Points
- ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Normal, Elite, Boss, World Boss)
- ‚úÖ Admin Panel ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå

---

## üõ† ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

### Frontend:
- **Next.js 14.2.7** - React Framework (App Router)
- **React 18.3.1** - UI Library
- **Tailwind CSS 3.4.13** - CSS Framework
- **NextAuth.js 4.24.11** - Authentication

### Backend:
- **Next.js API Routes** - RESTful API
- **MongoDB (Mongoose 8.19.1)** - Database
- **bcryptjs** - Password Hashing
- **crypto-js** - Encryption

### Development:
- **ESLint** - Code Linting
- **PostCSS** - CSS Processing
- **Autoprefixer** - CSS Compatibility

---

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

```
gamerpg/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ globals.css              # Global Styles
‚îÇ   ‚îú‚îÄ‚îÄ layout.js                # Root Layout
‚îÇ   ‚îú‚îÄ‚îÄ page.js                  # Home Page
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ admin/                   # üîê Admin Panel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ monsters/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.js         # Monster Management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [id]/page.js    # Edit Monster
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ create/page.js  # Create Monster
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed/page.js        # Seed Data
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/                     # üîå API Routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ route.js            # Main API Proxy
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ [...nextauth]/route.js  # NextAuth Handler
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/route.js       # User Registration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ character/route.js   # Character CRUD
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monsters/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ route.js         # Monster List/Create
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ [id]/route.js    # Monster Update/Delete
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ seed/route.js    # Seed Monsters
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ auth/                    # üîê Authentication Pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ signin/page.js      # Login Page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ signup/page.js      # Register Page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ error/page.js       # Auth Error Page
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ battle/                  # ‚öîÔ∏è Battle System
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ character/               # üë§ Character Management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create/page.js      # Character Creation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile/page.js     # Character Profile
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ game/                    # üéÆ Main Game
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ map/                     # üó∫Ô∏è World Map
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ stats/                   # üìä Stats Page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.js
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ components/              # üß© React Components
‚îÇ       ‚îú‚îÄ‚îÄ AuthButton.jsx       # Login/Logout Button
‚îÇ       ‚îú‚îÄ‚îÄ AuthProvider.jsx     # Session Provider
‚îÇ       ‚îú‚îÄ‚îÄ BattlePage.jsx       # Battle Logic
‚îÇ       ‚îú‚îÄ‚îÄ DynamicNav.jsx       # Navigation
‚îÇ       ‚îú‚îÄ‚îÄ HomeRoutes.jsx       # Home Navigation
‚îÇ       ‚îú‚îÄ‚îÄ RPGMap.jsx          # Map Component
‚îÇ       ‚îî‚îÄ‚îÄ StartRPG.jsx        # Start Game
‚îÇ       ‚îî‚îÄ‚îÄ game/                # Game Components
‚îÇ           ‚îú‚îÄ‚îÄ BattleArena.jsx  # Battle UI
‚îÇ           ‚îú‚îÄ‚îÄ BattleLog.jsx    # Combat Log
‚îÇ           ‚îú‚îÄ‚îÄ CharacterSheet.jsx
‚îÇ           ‚îú‚îÄ‚îÄ GameBuilder.jsx
‚îÇ           ‚îú‚îÄ‚îÄ GameHeader.jsx
‚îÇ           ‚îú‚îÄ‚îÄ InventoryPanel.jsx
‚îÇ           ‚îú‚îÄ‚îÄ ItemCard.jsx
‚îÇ           ‚îî‚îÄ‚îÄ StatSlider.jsx
‚îÇ
‚îú‚îÄ‚îÄ lib/                         # üìö Libraries & Utilities
‚îÇ   ÔøΩÔøΩÔøΩ‚îÄ‚îÄ api.js                  # API Service (Encrypted)
‚îÇ   ‚îú‚îÄ‚îÄ auth.js                 # NextAuth Config
‚îÇ   ‚îú‚îÄ‚îÄ mongodb.js              # MongoDB Connection
‚îÇ   ‚îú‚îÄ‚îÄ utils.js                # Utility Functions
‚îÇ   ‚îî‚îÄ‚îÄ game/                   # üé≤ Game Logic
‚îÇ       ‚îú‚îÄ‚îÄ classes.js          # Character Classes
‚îÇ       ‚îú‚îÄ‚îÄ combat.js           # Combat Calculations
‚îÇ       ‚îú‚îÄ‚îÄ dungeon.js          # Dungeon System
‚îÇ       ‚îú‚îÄ‚îÄ enemies.js          # Enemy Spawning
‚îÇ       ‚îú‚îÄ‚îÄ entities.js         # Entity Management
‚îÇ       ‚îú‚îÄ‚îÄ gear.js             # Equipment System
‚îÇ       ‚îú‚îÄ‚îÄ items.js            # Item Database
‚îÇ       ‚îú‚îÄ‚îÄ math.js             # Math Utilities
‚îÇ       ‚îî‚îÄ‚îÄ skills.js           # Skill System
‚îÇ
‚îú‚îÄ‚îÄ models/                      # üóÑÔ∏è Database Models
‚îÇ   ‚îú‚îÄ‚îÄ Account.js              # OAuth Accounts
‚îÇ   ‚îú‚îÄ‚îÄ Character.js            # Player Characters
‚îÇ   ‚îú‚îÄ‚îÄ Monster.js              # Monster Data
‚îÇ   ‚îú‚îÄ‚îÄ Session.js              # User Sessions
‚îÇ   ‚îî‚îÄ‚îÄ User.js                 # User Accounts
‚îÇ
‚îú‚îÄ‚îÄ scripts/                     # üîß Utility Scripts
‚îÇ   ‚îî‚îÄ‚îÄ seedMonsters.js         # Seed Monster Data
‚îÇ
‚îú‚îÄ‚îÄ jsconfig.json               # JS Configuration
‚îú‚îÄ‚îÄ next.config.js              # Next.js Config
‚îú‚îÄ‚îÄ package.json                # Dependencies
‚îú‚îÄ‚îÄ postcss.config.js           # PostCSS Config
‚îî‚îÄ‚îÄ tailwind.config.js          # Tailwind Config
```

---

## üîê ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏Å

### 1. **Authentication System**

#### Providers ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:
- ‚úÖ **Email/Password** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏µ‡πÄ‡∏°‡∏•
- ‚úÖ **Google OAuth** - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google
- ‚úÖ **Facebook OAuth** - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Facebook
- ‚úÖ **LINE OAuth** - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ LINE

#### ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:
- üîí Password Hashing ‡∏î‡πâ‡∏ß‡∏¢ bcryptjs
- üîí JWT Session Strategy
- üîí CSRF Protection
- üîí Encrypted API Communication

#### Files:
- `lib/auth.js` - NextAuth Configuration
- `app/api/auth/[...nextauth]/route.js` - Auth Handler
- `app/api/auth/register/route.js` - Registration API
- `app/auth/signin/page.js` - Login UI
- `app/auth/signup/page.js` - Register UI

---

### 2. **Character System**

#### ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (Classes):
##### ‚öîÔ∏è **Warrior (‡∏ô‡∏±‡∏Å‡∏î‡∏≤‡∏ö)**
```javascript
Base Stats: { STR: 8, VIT: 7, DEX: 4, INT: 2, AGI: 3, LUK: 3 }
Bonuses: { HP: +20, ATK: +5, DEF: +3 }
Starting Weapon: Iron Sword
Skills: Slash, Guard, Power Strike
```

##### üèπ **Archer (‡∏ô‡∏±‡∏Å‡∏ò‡∏ô‡∏π)**
```javascript
Base Stats: { DEX: 8, AGI: 7, STR: 4, VIT: 4, INT: 3, LUK: 4 }
Bonuses: { HP: +5, MP: +5, ATK: +4, DEF: +1 }
Starting Weapon: Short Bow
Skills: Quick Shot, Multi Shot, Guard
```

##### üîÆ **Mage (‡∏ô‡∏±‡∏Å‡πÄ‡∏ß‡∏ó‡∏¢‡πå)**
```javascript
Base Stats: { INT: 8, LUK: 5, AGI: 4, DEX: 3, VIT: 3, STR: 2 }
Bonuses: { MP: +20, ATK: +2 }
Starting Weapon: Wooden Staff
Skills: Fireball, Heal, Guard
```

#### Stat System:
- **STR** (Strength) - ‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û
- **DEX** (Dexterity) - ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥, Critical Rate
- **INT** (Intelligence) - ‡∏û‡∏•‡∏±‡∏á‡πÄ‡∏ß‡∏ó‡∏¢‡πå, MP
- **VIT** (Vitality) - HP, Defense
- **AGI** (Agility) - ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß, Evasion
- **LUK** (Luck) - ‡πÇ‡∏ä‡∏Ñ, Critical, Drop Rate

#### Files:
- `lib/game/classes.js` - Class Definitions
- `models/Character.js` - Character Schema
- `app/character/create/page.js` - Character Creation UI
- `app/character/profile/page.js` - Character Profile

---

### 3. **Combat System**

#### Battle Types:
- **Turn-based** - ‡∏ú‡∏•‡∏±‡∏î‡∏Å‡∏±‡∏ô‡πÇ‡∏à‡∏°‡∏ï‡∏µ
- **Physical Damage** - ‡πÉ‡∏ä‡πâ STR, DEX, Crit
- **Magic Damage** - ‡πÉ‡∏ä‡πâ INT, ‡∏û‡∏•‡∏±‡∏á‡πÄ‡∏ß‡∏ó‡∏¢‡πå
- **Evasion** - ‡∏´‡∏•‡∏ö‡∏´‡∏•‡∏µ‡∏Å‡∏à‡∏≤‡∏Å AGI
- **Guard** - ‡∏•‡∏î damage 40%

#### Damage Calculation:
```javascript
Physical = (ATK + STR * 1.2) * multiplier * crit / armor
Magic = (WPOW + INT * 2.2) * multiplier / resist
Critical = DEX * 0.02 + LUK * 0.01 + gear mods
```

#### Files:
- `lib/game/combat.js` - Combat Calculations
- `lib/game/entities.js` - Entity Management
- `app/components/BattlePage.jsx` - Battle Logic
- `app/components/game/BattleArena.jsx` - Battle UI

---

### 4. **Equipment System**

#### Slot Types:
- **Weapon** - ‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò (‡πÄ‡∏û‡∏¥‡πà‡∏° ATK, Crit)
- **Armor** - ‡πÄ‡∏Å‡∏£‡∏≤‡∏∞ (‡πÄ‡∏û‡∏¥‡πà‡∏° VIT, Defense)
- **Charm** - ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏•‡∏±‡∏á (‡πÄ‡∏û‡∏¥‡πà‡∏° Stats ‡∏û‡∏¥‡πÄ‡∏®‡∏©)

#### Rarity Levels:
- **C (Common)** - 65% drop rate
- **B (Rare)** - 28% drop rate
- **A (Epic)** - 7% drop rate

#### Sample Items:
```javascript
Weapons: Stick, Dagger, Wand, Sword, Blazing Rod
Armors: Cloth Shirt, Leather Vest, Chainmail, Mystic Robe, Iron Plate
Charms: Lucky Clover, Fleet Anklet, Focus Bead, Heart Locket, Assassin Seal
```

#### Files:
- `lib/game/items.js` - Item Database
- `lib/game/gear.js` - Equipment Logic
- `app/components/game/InventoryPanel.jsx` - Inventory UI

---

### 5. **Skill System**

#### Available Skills:
1. **Attack** - Basic physical attack (0 MP)
2. **Quick Strike** - Fast attack with high crit (2 MP)
3. **Power Smash** - Heavy damage (3 MP)
4. **Mind Bolt** - Magic attack (4 MP)
5. **Fire Orb** - Heavy magic attack (6 MP)
6. **Heal** - Restore HP (5 MP)
7. **Guard** - Reduce damage + restore 2 MP (0 MP)

#### Files:
- `lib/game/skills.js` - Skill Definitions

---

### 6. **Dungeon System**

#### Dungeons:
```javascript
1. Sunny Meadow - Levels 1-4 (Boss at Room 4)
2. Ancient Ruins - Levels 3-6 (Boss at Room 4)
```

#### Enemy Types:
- **Normal Enemies:** Slime, Goblin, Wolf, Apprentice Mage, Bandit, Stone Golem
- **Boss:** Orc Chief

#### Files:
- `lib/game/dungeon.js` - Dungeon Config
- `lib/game/enemies.js` - Enemy Spawning

---

### 7. **Monster Management System**

#### Monster Types:
- **normal** - ‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
- **elite** - ‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏£‡πà‡∏á
- **boss** - ‡∏ö‡∏≠‡∏™
- **world_boss** - ‡∏ö‡∏≠‡∏™‡πÉ‡∏´‡∏ç‡πà

#### Monster Schema:
```javascript
{
  name: String,          // ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  nameEn: String,        // ‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
  icon: String,          // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô emoji
  type: Enum,            // ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
  level: Number,         // ‡πÄ‡∏•‡πÄ‡∏ß‡∏•
  stats: {
    hp: Number,          // ‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï
    attack: Number,      // ‡∏û‡∏•‡∏±‡∏á‡πÇ‡∏à‡∏°‡∏ï‡∏µ
    defense: Number,     // ‡∏û‡∏•‡∏±‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
    speed: Number        // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
  },
  rewards: {
    exp: { min, max },   // EXP ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
    gold: { min, max },  // Gold ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
    dropRate: Number     // ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏î‡∏£‡∏≠‡∏õ‡πÑ‡∏≠‡πÄ‡∏ó‡∏°
  }
}
```

#### Files:
- `models/Monster.js` - Monster Schema
- `app/admin/monsters/page.js` - Monster List
- `app/admin/monsters/create/page.js` - Create Monster
- `scripts/seedMonsters.js` - Seed Script

---

## üóÑÔ∏è ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### Database: **MongoDB**

### Models:

#### 1. **User Model**
```javascript
{
  name: String,          // ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
  email: String,         // ‡∏≠‡∏µ‡πÄ‡∏°‡∏• (unique)
  password: String,      // ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (hashed)
  image: String,         // ‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
  emailVerified: Date,   // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•
  provider: Enum,        // credentials | google | facebook | line
  providerId: String,    // OAuth Provider ID
  timestamps: true       // createdAt, updatedAt
}
```

#### 2. **Character Model**
```javascript
{
  userId: ObjectId,      // ref to User
  name: String,          // ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ (max 30)
  class: {               // ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û
    id: String,          // warrior | archer | mage
    name: String,
    nameEn: String,
    icon: String
  },
  level: Number,         // ‡πÄ‡∏•‡πÄ‡∏ß‡∏• (default: 1)
  exp: Number,           // EXP (default: 0)
  expToNext: Number,     // EXP ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏≠‡∏±‡∏û
  statPoints: Number,    // ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
  stats: {               // ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
    STR, DEX, INT, VIT, AGI, LUK
  },
  equipment: {           // ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
    weapon: Mixed,
    armor: Mixed,
    charm: Mixed
  },
  inventory: [Mixed],    // ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤
  materials: {           // ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
    ores: [Mixed],
    crystals: [Mixed],
    essences: [Mixed],
    scrolls: [Mixed]
  },
  dungeonProgress: {     // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
    dungeonIndex: Number,
    roomIndex: Number
  },
  gold: Number,          // ‡πÄ‡∏á‡∏¥‡∏ô
  isActive: Boolean,     // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  timestamps: true
}
```

#### 3. **Monster Model**
```javascript
{
  name: String,          // ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå
  nameEn: String,        // ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
  icon: String,          // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô
  description: String,   // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
  type: Enum,            // normal | elite | boss | world_boss
  level: Number,         // ‡πÄ‡∏•‡πÄ‡∏ß‡∏•
  stats: {
    hp, attack, defense, speed
  },
  rewards: {
    exp: { min, max },
    gold: { min, max },
    dropRate: Number
  },
  isActive: Boolean,     // ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  timestamps: true
}
```

#### 4. **Account Model** (NextAuth)
```javascript
{
  userId: ObjectId,
  type: String,
  provider: String,
  providerAccountId: String,
  access_token: String,
  refresh_token: String,
  expires_at: Number,
  token_type: String,
  scope: String,
  id_token: String,
  session_state: String
}
```

#### 5. **Session Model** (NextAuth)
```javascript
{
  sessionToken: String,
  userId: ObjectId,
  expires: Date
}
```

---

## üîå API Endpoints

### Authentication:
```
POST   /api/auth/register        # ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
GET    /api/auth/[...nextauth]   # NextAuth endpoints
POST   /api/auth/[...nextauth]   # NextAuth endpoints
```

### Character:
```
GET    /api/character             # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
POST   /api/character             # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
PUT    /api/character             # ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
DELETE /api/character             # ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
```

### Monsters:
```
GET    /api/monsters              # ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå
POST   /api/monsters              # ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Admin)
GET    /api/monsters/[id]         # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå
PUT    /api/monsters/[id]         # ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Admin)
DELETE /api/monsters/[id]         # ‡∏•‡∏ö‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Admin)
POST   /api/monsters/seed         # Seed ‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå (Admin)
```

### Main API Proxy:
```
POST   /api                       # Encrypted API Proxy
```

---

## üé≤ ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°

### 1. **Stat Calculation**
```javascript
Derived Stats = Base Stats + Gear Modifiers

maxHP = 30 + VIT * 10 + gear.HP
maxMP = 10 + INT * 6 + gear.MP
ATK = 4 + STR * 3 + gear.ATK
SPD = 5 + AGI * 2 + DEX * 0.5 + gear.SPD
CRIT = 0.03 + DEX * 0.02 + LUK * 0.01 + gear.CRIT
EVA = AGI * 0.01 + gear.EVA (max 0.35)
ARMOR = 1 + VIT * 0.04 + gear.ARM
WPOW = 6 + INT * 2.8 + gear.WPOW
```

### 2. **Level System**
- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà Level 1
- EXP to Next Level = Dynamic (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà 20)
- ‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏≠‡∏±‡∏û‡πÑ‡∏î‡πâ Stat Points
- ‡πÑ‡∏î‡πâ EXP ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏ä‡∏ô‡∏∞‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå

### 3. **Loot System**
- Drop Rate ‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏°‡∏≠‡∏ô‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå
- Rarity: C (65%), B (28%), A (7%)
- Random Item ‡∏à‡∏≤‡∏Å Loot Pool

### 4. **Progression System**
- Story Mode: ‡∏ú‡πà‡∏≤‡∏ô Dungeons ‡∏ó‡∏µ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á
- Free Roam: ‡∏™‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
- Boss Battles: ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÉ‡∏ô Dungeon

---

## üîÑ Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### 1. **User Registration Flow**
```
User ‚îÄ> Signup Page ‚îÄ> POST /api/auth/register 
     ‚îÄ> Create User in MongoDB 
     ‚îÄ> Auto SignIn 
     ‚îÄ> Redirect to Home
```

### 2. **Character Creation Flow**
```
User ‚îÄ> Character Create Page 
     ‚îÄ> Select Class (Warrior/Archer/Mage)
     ‚îÄ> Enter Name
     ‚îÄ> Confirm
     ‚îÄ> POST /api/character
     ‚îÄ> Save to MongoDB
     ‚îÄ> Redirect to Game
```

### 3. **Battle Flow**
```
Start Battle ‚îÄ> Spawn Enemy (from Dungeon/Map)
            ‚îÄ> Calculate Turn Order (by SPD)
            ‚îÄ> Player/Enemy Turn:
               ‚îú‚îÄ> Select Skill
               ‚îú‚îÄ> Calculate Damage
               ‚îú‚îÄ> Apply Damage
               ‚îú‚îÄ> Check Death
               ‚îî‚îÄ> Switch Turn
            ‚îÄ> Battle End:
               ‚îú‚îÄ> Victory: Gain EXP, Gold, Loot
               ‚îú‚îÄ> Defeat: Return to previous state
               ‚îî‚îÄ> Update Character to MongoDB
```

### 4. **Equipment Flow**
```
Gain Item ‚îÄ> Add to Inventory
          ‚îÄ> View Inventory
          ‚îÄ> Equip Item
          ‚îÄ> Recalculate Stats
          ‚îÄ> Update Character
          ‚îÄ> Save to MongoDB
```

---

## üîß Utility Functions

### Math Utilities (`lib/game/math.js`):
- `clamp(value, min, max)` - ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡πà‡∏≤
- `rand(min, max)` - ‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°
- `irand(min, max)` - ‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°
- `chance(probability)` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏≠‡∏Å‡∏≤‡∏™
- `calculateDerivedStats()` - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥

### API Service (`lib/api.js`):
- Encrypted API Communication
- Methods: `get`, `post`, `put`, `patch`, `delete`
- Auto resolve origin for absolute URLs

### Utils (`lib/utils.js`):
- `encrypt(data)` - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- `checkPayload(payload, required)` - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö payload

---

## üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

### Total Files: ~50+ files
### Total Lines of Code: ~5,000+ lines
### Database Collections: 5 (User, Character, Monster, Account, Session)
### API Endpoints: 10+
### Components: 15+
### Game Mechanics: 7+ systems

---

## üöÄ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Development:
```bash
npm run dev      # ‡πÄ‡∏£‡∏¥‡πà‡∏° dev server (port 3000)
npm run build    # Build production
npm start        # ‡πÄ‡∏£‡∏¥‡πà‡∏° production server
npm run lint     # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö code
npm run seed     # Seed monster data
```

### Environment Variables (.env.local):
```env
# MongoDB
MONGO_URI=mongodb://...
MONGO_DB_NAME=gamerpg

# NextAuth
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-key

# OAuth Providers
GOOGLE_CLIENT_ID=...
GOOGLE_CLIENT_SECRET=...
FACEBOOK_CLIENT_ID=...
FACEBOOK_CLIENT_SECRET=...
LINE_CLIENT_ID=...
LINE_CLIENT_SECRET=...

# Encryption
ENCRYPTION_SECRET_KEY=...
ENCRYPTION_SECRET_IV=...
```

---

## üìù ‡∏™‡∏£‡∏∏‡∏õ

‡∏£‡∏∞‡∏ö‡∏ö **GameRPG Playground** ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Å‡∏° RPG ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:

### ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
1. **Authentication** - 4 ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á (Email, Google, Facebook, LINE)
2. **Character System** - 3 ‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏û‡∏£‡πâ‡∏≠‡∏° Stats ‡πÅ‡∏•‡∏∞ Equipment
3. **Combat System** - Turn-based battles with skills
4. **Dungeon System** - Progressive story mode
5. **Monster Management** - Admin panel ‡∏û‡∏£‡πâ‡∏≠‡∏° CRUD
6. **Database Integration** - MongoDB with Mongoose
7. **Encrypted API** - Security layer

### üéØ ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô:
- ‚ö° Modern Stack (Next.js 14 + React 18)
- üé® Beautiful UI (Tailwind CSS)
- üîê Secure Authentication (NextAuth.js)
- üì± Responsive Design
- üéÆ Complete RPG Mechanics
- üíæ Cloud Database (MongoDB)

### üîÆ ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ:
- PvP System (‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏≠‡∏á vs ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏≠‡∏á)
- Guild System (‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏•‡∏î‡πå)
- Crafting System (‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏≤‡∏ü‡∏ó‡πå)
- Achievement System (‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)
- Leaderboard (‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥)
- Real-time Multiplayer

---

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠:** 2025-10-13  
**Version:** 1.0.0  
**Framework:** Next.js 14.2.7

